# 要件確認 QAシート

本シートは「仕様.md」の内容を精査し、不明点・あいまいな部分を洗い出したものです。
各項目について回答を記入し、要件を明確化してください。

---

## 1. Override動作の詳細

| No. | 質問 | 回答 |
|-----|------|------|
| 1-1 | 下の段のクリップが上の段のクリップと部分的にしか重ならない場合、重ならない部分はどう扱いますか？（例: 上の段が0〜10秒、下の段が5〜10秒の場合、0〜5秒は上の段を維持？） | Unityの仕様に従います。つまり、下の段のクリップのAnimationExtrapolationプロパティの内容によって変化します。 |
| 1-2 | 同一PropertyのOverrideは、重なっている時間範囲だけ無効化されますか？それともAnimationCurve全体が無効化されますか？ | 1-1で示した通り、下の段のクリップのAnimationExtrapolationによって有効、無効、無効時の挙動が変化します。 |

---

## 2. トラック構造の扱い

| No. | 質問 | 回答 |
|-----|------|------|
| 2-1 | 「OverrideTrack」とは具体的に何を指しますか？（TrackGroup内にネストされたAnimationTrack？AvatarMaskを使ったOverride Track？） | Script上はAnimationTrackと同じようですが、TimelineEditor上での挙動が異なります。具体的には、Override元となるAnimationTrackのBind情報がフォールダウンされています。 |
| 2-2 | TrackGroupの階層がある場合、優先順位はどのように決まりますか？ | 原則、下にあるものほど優先順位が高くなります。 |

---

## 3. クリップ単位の挙動

| No. | 質問 | 回答 |
|-----|------|------|
| 3-1 | 1つのトラック内に複数のAnimationClipが配置されている場合、それらも統合対象ですか？ | はい |
| 3-2 | クリップ間にGap（空白）がある場合、その区間はどう扱いますか？ | タイミングが早い方のクリップのAnimationExtrapolationによって決定されます |
| 3-3 | クリップのEaseIn/EaseOut（ブレンド）は考慮しますか？ | はい。各ClipのBlendCurvesのInとOutを用いて正しくブレンドします。 |

---

## 4. 出力仕様

| No. | 質問 | 回答 |
|-----|------|------|
| 4-1 | 生成されるAnimationClipのファイル名はどのように決まりますか？ | TimelineAssetの名前_Merged.animとします。 |
| 4-2 | 保存先はユーザーが指定できますか？それとも固定パスですか？ | Assetsフォルダ直下に固定とします。 |
| 4-3 | 同名ファイルが存在する場合、上書き確認は必要ですか？ | 確認はせず、(1)などの重複しない名前を付けて保存してください。 |

---

## 5. 対象範囲の指定

| No. | 質問 | 回答 |
|-----|------|------|
| 5-1 | マージ対象のトラックをユーザーが選択できますか？（特定トラックのみ選択など） | 必要ありませんが、Muteになっているトラックはマージ処理に含めないでください。 |
| 5-2 | 時間範囲を指定してマージする機能は必要ですか？ | プロトタイプの段階では必要ありません。 |

---

## 6. エラーケース

| No. | 質問 | 回答 |
|-----|------|------|
| 6-1 | バインドされていないトラック（Animator未設定）がある場合、どう扱いますか？ | エラーログを出力しつつ、処理をスキップしてください。 |
| 6-2 | 対象となるトラックが0件の場合、どう扱いますか？ | エラーログを出力し、処理を終了します。 |

---

## 7. 技術的な詳細

| No. | 質問 | 回答 |
|-----|------|------|
| 7-1 | 出力AnimationClipのフレームレートは何に合わせますか？（Timeline設定？元クリップ？固定値？） | Timeline設定に合わせてください。 |
| 7-2 | ルートモーションのプロパティは含めますか？ | はい。 |
| 7-3 | Humanoidリグのマッスルカーブは対応しますか？ | それが設定されていたら対応してください。 |

---

## 8. UI/UX

| No. | 質問 | 回答 |
|-----|------|------|
| 8-1 | 処理中のプログレス表示は必要ですか？ | 必要です。 |
| 8-2 | 成功/失敗時の通知方法は何を想定していますか？（ダイアログ？Console？） | Consoleに表示してください。 |

---

## 備考欄

追加の検討事項やメモがあればこちらに記載してください。

PlayableDirectorやTimelineAssetファイルを複数選択したら、一つずつ連続実行できるようにしてください。